set dotenv-load := false

COLOR := "\\033[0;32m"
NO_COLOR := "\\033[0m"

# Show all available recipes
@_default:
    printf "\n{{ COLOR }}# ES (path: \`docker/es/\`)\n"
    printf "========================={{ NO_COLOR }}\n"
    just --list --unsorted


##########
# Health #
##########

# Check the health of the service
@health host="es:9200":
    just ../curl "-s -o /dev/null -w %{http_code} http://{{ host }}/_cluster/health"

# Wait for the service to be healthy
@wait host="es:9200":
    just ../../curl "--retry-connrefused --retry 5 --retry-delay 5 http://{{ host }}/_cluster/health"
